# File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.

from typing import List, Optional
from typing_extensions import Literal

from pydantic import Field as FieldInfo

from .._models import BaseModel

__all__ = ["IftaGetIftaDetailJobResponseBody", "Data", "DataArgs", "DataFile"]


class DataArgs(BaseModel):
    end_hour: str = FieldInfo(alias="endHour")
    """The `endHour` used to create this job."""

    start_hour: str = FieldInfo(alias="startHour")
    """The `startHour` used to create this job."""

    vehicle_ids: List[int] = FieldInfo(alias="vehicleIds")
    """The vehicleIds used to create this job.

    Determined by the filter list of `vehicleIds`, `vehicleTagIds`, and
    `vehicleParentTagIds` parameters (if provided).
    """


class DataFile(BaseModel):
    created_at_time: str = FieldInfo(alias="createdAtTime")
    """When this file was created."""

    download_url: str = FieldInfo(alias="downloadUrl")
    """A url to download the generated file.

    The contents will be gzipped. This url has an expiration and will no longer be
    valid after expiration.
    """

    download_url_expiration_time: str = FieldInfo(alias="downloadUrlExpirationTime")
    """The expiration time of this file's download url.

    Requesting this job again by ID will refresh the download urls, if expired.
    """

    name: str
    """The name of this file."""

    record_count: int = FieldInfo(alias="recordCount")
    """The number of records in this file."""


class Data(BaseModel):
    args: DataArgs
    """The arguments used to create this job."""

    job_id: str = FieldInfo(alias="jobId")
    """The ID used to retrieve this job."""

    job_status: Literal["Requested", "Processing", "Completed", "Failed"] = FieldInfo(alias="jobStatus")
    """The status of this job.

    `jobStatus` can be one of Requested, Processing, Completed, or Failed. Valid
    values: `Requested`, `Processing`, `Completed`, `Failed`
    """

    requested_at_time: str = FieldInfo(alias="requestedAtTime")
    """The time this job was requested for creation."""

    completed_at_time: Optional[str] = FieldInfo(alias="completedAtTime", default=None)
    """The time this job completed successfully."""

    details: Optional[str] = None
    """A message containing additional details about the job, if available."""

    failed_at_time: Optional[str] = FieldInfo(alias="failedAtTime", default=None)
    """The time this job failed."""

    files: Optional[List[DataFile]] = None
    """A list of files generated by this job.

    This field will be omitted when the job status is "Failed" or no data exists
    with the provided job arguments. Read about the file structure
    [here](https://developers.samsara.com/docs/ifta-detail-csv).
    """

    started_at_time: Optional[str] = FieldInfo(alias="startedAtTime", default=None)
    """The time this job started processing."""


class IftaGetIftaDetailJobResponseBody(BaseModel):
    data: Data
    """A job representing the async generation of IFTA mileage segments.

    The job should be polled until the state is terminal.
    """
